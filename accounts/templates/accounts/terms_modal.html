<!-- Modal de Terminos y Condiciones -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="termsModalLabel">
                    <i class="fas fa-file-contract text-primary me-2"></i>
                    Terminos y Condiciones de Servicio
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div class="terms-content">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Version 1.0</strong> - Ultima actualizacion: Enero 2025
                    </div>

                    <div class="terms-section">
                        <h4>1. Definiciones y Servicios</h4>
                        <p>Megadominio.co es una plataforma de servicios digitales que ofrece soluciones de hosting, dominios, desarrollo web y servicios relacionados. Al utilizar nuestros servicios, usted acepta estos terminos y condiciones.</p>
                        
                        <h5>Servicios Ofrecidos:</h5>
                        <ul>
                            <li>Hosting web compartido, VPS y dedicado</li>
                            <li>Registro y gestion de dominios</li>
                            <li>Certificados SSL</li>
                            <li>Desarrollo web personalizado</li>
                            <li>Servicios de email empresarial</li>
                            <li>Mantenimiento y soporte tecnico</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h4>2. Registro y Cuenta de Usuario</h4>
                        <p>Para utilizar nuestros servicios, debe crear una cuenta proporcionando informacion veraz y actualizada. Es responsable de mantener la confidencialidad de sus credenciales de acceso.</p>
                        
                        <h5>Responsabilidades del Usuario:</h5>
                        <ul>
                            <li>Proporcionar informacion veraz y actualizada</li>
                            <li>Mantener la seguridad de su cuenta</li>
                            <li>Notificar cualquier uso no autorizado</li>
                            <li>Cumplir con las politicas de uso aceptable</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h4>3. Metodos de Pago</h4>
                        <p>Procesamos pagos a traves de <strong>Wompi</strong>, la pasarela de pagos mas confiable de Colombia. Aceptamos los siguientes metodos:</p>
                        
                        <div class="payment-methods">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Tarjetas de Credito/Debito:</h6>
                                    <ul>
                                        <li>Visa</li>
                                        <li>Mastercard</li>
                                        <li>American Express</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Metodos Digitales:</h6>
                                    <ul>
                                        <li>PSE (Pagos Seguros en Linea)</li>
                                        <li>Nequi</li>
                                        <li>Transferencias bancarias</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="terms-section">
                        <h4>4. Politica de Reembolsos</h4>
                        <p>Ofrecemos garantia de satisfaccion en nuestros servicios:</p>
                        
                        <ul>
                            <li><strong>Hosting:</strong> 30 dias de garantia de devolucion del dinero</li>
                            <li><strong>Dominios:</strong> No reembolsables despues de 24 horas</li>
                            <li><strong>Desarrollo web:</strong> Segun acuerdo especifico del proyecto</li>
                            <li><strong>SSL:</strong> 30 dias de garantia</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h4>5. Politica de Uso Aceptable</h4>
                        <p>Esta prohibido utilizar nuestros servicios para:</p>
                        
                        <ul>
                            <li>Actividades ilegales o fraudulentas</li>
                            <li>Spam o comunicaciones no solicitadas</li>
                            <li>Contenido que viole derechos de autor</li>
                            <li>Malware, virus o codigo malicioso</li>
                            <li>Actividades que consuman recursos excesivos</li>
                            <li>Contenido ofensivo o discriminatorio</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h4>6. Disponibilidad y Garantias</h4>
                        <p>Garantizamos un 99.9% de disponibilidad en nuestros servicios de hosting. En caso de incumplimiento, ofrecemos creditos de servicio segun nuestro SLA.</p>
                        
                        <h5>Exclusiones:</h5>
                        <ul>
                            <li>Mantenimiento programado</li>
                            <li>Fallas de terceros (ISP, DNS)</li>
                            <li>Ataques DDoS</li>
                            <li>Fuerza mayor</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h4>7. Propiedad Intelectual</h4>
                        <p>Respetamos los derechos de propiedad intelectual. Todos los contenidos de nuestra plataforma estan protegidos por derechos de autor y marcas registradas.</p>
                    </div>

                    <div class="terms-section">
                        <h4>8. Limitacion de Responsabilidad</h4>
                        <p>Nuestra responsabilidad se limita al monto pagado por el servicio afectado. No somos responsables por danos indirectos, perdida de datos o lucro cesante.</p>
                    </div>

                    <div class="terms-section">
                        <h4>9. Terminacion del Servicio</h4>
                        <p>Podemos suspender o terminar servicios por:</p>
                        
                        <ul>
                            <li>Incumplimiento de estos terminos</li>
                            <li>Falta de pago</li>
                            <li>Actividades ilegales</li>
                            <li>Uso excesivo de recursos</li>
                        </ul>
                    </div>

                    <div class="terms-section">
                        <h4>10. Privacidad y Proteccion de Datos</h4>
                        <p>Cumplimos con la Ley 1581 de 2012 de Colombia sobre proteccion de datos personales. Su informacion es tratada con la maxima confidencialidad.</p>
                    </div>

                    <div class="terms-section">
                        <h4>11. Modificaciones</h4>
                        <p>Nos reservamos el derecho de modificar estos terminos. Los cambios seran notificados con 30 dias de anticipacion.</p>
                    </div>

                    <div class="terms-section">
                        <h4>12. Ley Aplicable</h4>
                        <p>Estos terminos se rigen por las leyes de la Republica de Colombia. Cualquier disputa sera resuelta en los tribunales competentes de Bogota, Colombia.</p>
                    </div>

                    <div class="terms-section">
                        <h4>13. Contacto</h4>
                        <p>Para consultas sobre estos terminos, contactenos:</p>
                        
                        <div class="contact-info">
                            <p><strong>Email:</strong> legal@megadominio.co</p>
                            <p><strong>Telefono:</strong> +57 (1) 234-5678</p>
                            <p><strong>Direccion:</strong> Calle 100 #15-20, Bogota, Colombia</p>
                        </div>
                    </div>

                    <div class="terms-section">
                        <h4>14. Aceptacion</h4>
                        <p>Al hacer clic en "Acepto los terminos y condiciones", usted confirma que ha leido, entendido y acepta cumplir con todos los terminos establecidos en este documento.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="d-flex justify-content-between w-100">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="acceptTermsCheckbox">
                        <label class="form-check-label" for="acceptTermsCheckbox">
                            He leido y acepto los terminos y condiciones
                        </label>
                    </div>
                    <div>
                        <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">
                            <i class="fas fa-times me-1"></i>Cancelar
                        </button>
                        <button type="button" class="btn btn-primary" id="confirmAcceptTerms" disabled>
                            <i class="fas fa-check me-1"></i>Aceptar Terminos
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Modal personalizada con tema naranja y negro */
#termsModal .modal-content {
    background-color: #1a1a1a;
    border: 2px solid #ff6b35;
    border-radius: 15px;
    color: #ffffff;
}

#termsModal .modal-header {
    background: linear-gradient(135deg, #ff6b35, #ff8c42);
    border-bottom: 2px solid #ff6b35;
    border-radius: 13px 13px 0 0;
}

#termsModal .modal-title {
    color: #ffffff !important;
    font-weight: bold;
}

#termsModal .btn-close {
    filter: invert(1);
    opacity: 0.8;
}

#termsModal .btn-close:hover {
    opacity: 1;
}

#termsModal .modal-body {
    background-color: #1a1a1a;
    color: #ffffff;
}

#termsModal .modal-footer {
    background-color: #1a1a1a;
    border-top: 2px solid #ff6b35;
    border-radius: 0 0 13px 13px;
}

.terms-content {
    font-size: 14px;
    line-height: 1.6;
    color: #ffffff;
}

.terms-section {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #333;
}

.terms-section:last-child {
    border-bottom: none;
}

.terms-section h4 {
    color: #ff6b35;
    margin-bottom: 1rem;
    font-weight: 600;
    text-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
}

.terms-section h5 {
    color: #ff8c42;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.terms-section h6 {
    color: #ffab73;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.terms-section p {
    color: #cccccc;
    margin-bottom: 1rem;
}

.terms-section ul {
    color: #cccccc;
}

.terms-section li {
    color: #cccccc;
    margin-bottom: 0.3rem;
}

.terms-section strong {
    color: #ff6b35;
    font-weight: 600;
}

.payment-methods {
    background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
    border: 1px solid #ff6b35;
    padding: 1rem;
    border-radius: 8px;
    margin: 1rem 0;
}

.contact-info {
    background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
    border: 1px solid #ff6b35;
    padding: 1rem;
    border-radius: 8px;
    margin: 1rem 0;
}

.contact-info p {
    margin-bottom: 0.5rem;
    color: #cccccc;
}

.contact-info strong {
    color: #ff6b35;
}

.alert-info {
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(255, 140, 66, 0.1));
    border: 1px solid #ff6b35;
    color: #ffffff;
}

.alert-info .fas {
    color: #ff6b35;
}

.alert-info strong {
    color: #ff6b35;
}

/* Checkbox personalizado */
#termsModal .form-check-input {
    background-color: #2a2a2a;
    border: 2px solid #ff6b35;
}

#termsModal .form-check-input:checked {
    background-color: #ff6b35;
    border-color: #ff6b35;
}

#termsModal .form-check-input:focus {
    border-color: #ff6b35;
    box-shadow: 0 0 0 0.25rem rgba(255, 107, 53, 0.25);
}

#termsModal .form-check-label {
    color: #cccccc;
}

/* Botones personalizados */
#termsModal .btn-secondary {
    background: linear-gradient(135deg, #666, #444);
    border: 1px solid #666;
    color: #ffffff;
}

#termsModal .btn-secondary:hover {
    background: linear-gradient(135deg, #777, #555);
    border-color: #777;
    transform: translateY(-1px);
}

#termsModal .btn-primary {
    background: linear-gradient(135deg, #ff6b35, #ff8c42);
    border: 1px solid #ff6b35;
    color: #ffffff;
    font-weight: 600;
}

#termsModal .btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #ff8c42, #ffab73);
    border-color: #ff8c42;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
}

#termsModal .btn-primary:disabled {
    background: linear-gradient(135deg, #666, #444);
    border-color: #666;
    color: #999;
    opacity: 0.6;
}

.modal-xl {
    max-width: 1200px;
}

/* Scrollbar personalizada */
#termsModal .modal-body::-webkit-scrollbar {
    width: 8px;
}

#termsModal .modal-body::-webkit-scrollbar-track {
    background: #2a2a2a;
    border-radius: 4px;
}

#termsModal .modal-body::-webkit-scrollbar-thumb {
    background: #ff6b35;
    border-radius: 4px;
}

#termsModal .modal-body::-webkit-scrollbar-thumb:hover {
    background: #ff8c42;
}

@media (max-width: 768px) {
    .modal-xl {
        max-width: 95%;
        margin: 1rem auto;
    }
    
    .terms-content {
        font-size: 13px;
    }
    
    #termsModal .modal-footer {
        flex-direction: column;
        gap: 1rem;
    }
    
    #termsModal .d-flex.justify-content-between {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const acceptCheckbox = document.getElementById('acceptTermsCheckbox');
    const confirmButton = document.getElementById('confirmAcceptTerms');
    const termsModal = document.getElementById('termsModal');
    
    // Habilitar/deshabilitar boton segun checkbox
    acceptCheckbox.addEventListener('change', function() {
        confirmButton.disabled = !this.checked;
    });
    
    // Manejar confirmacion de terminos
    confirmButton.addEventListener('click', function() {
        if (!acceptCheckbox.checked) {
            alert('Debe aceptar los terminos y condiciones para continuar.');
            return;
        }
        
        // Mostrar loading
        confirmButton.disabled = true;
        confirmButton.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>Procesando...';
        
        // Enviar aceptacion
        fetch('{% url "accounts:accept_terms" %}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            },
            body: 'terms_version=1.0'
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success' || data.status === 'already_accepted') {
                // Cerrar modal
                const modal = bootstrap.Modal.getInstance(termsModal);
                modal.hide();
                
                // Marcar checkbox en el checkout si existe
                const checkoutTermsCheckbox = document.getElementById('terms_accepted');
                if (checkoutTermsCheckbox) {
                    checkoutTermsCheckbox.checked = true;
                    checkoutTermsCheckbox.dispatchEvent(new Event('change'));
                }
                
                // Mostrar mensaje de exito
                if (typeof showAlert === 'function') {
                    showAlert('success', data.message);
                } else {
                    alert(data.message);
                }
            } else {
                alert('Error: ' + (data.message || 'Error desconocido'));
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error al procesar la solicitud. Por favor, intente nuevamente.');
        })
        .finally(() => {
            // Restaurar boton
            confirmButton.disabled = false;
            confirmButton.innerHTML = '<i class="fas fa-check me-1"></i>Aceptar Terminos';
        });
    });
    
    // Resetear modal al cerrar
    termsModal.addEventListener('hidden.bs.modal', function() {
        acceptCheckbox.checked = false;
        confirmButton.disabled = true;
    });
});
</script> 